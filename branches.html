<!DOCTYPE html>
<html lang="en" dir="ltr">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Branches - AlSaji Auto Parts</title>
    <link rel="stylesheet" href="css/style.css">
  <style>
    /* Your existing CSS styles */
    :root {
      --primary: #2c3e50;
      --secondary: #e74c3c;
      --w1: #ffffff;
      --w2: #f8f9fa;
      --w3: #e9ecef;
      --muted: #6c757d;
      --text: #212529;
    }








    .map-container {
      height: 400px;
      border-radius: 16px;
      overflow: hidden;
      box-shadow: 0 4px 12px rgba(0,0,0,0.1);
      margin-bottom: 24px;
    }

    #map {
      height: 100%;
      width: 100%;
    }

    .grid {
      display: grid;
      gap: 20px;
    }

    .cols-3 {
      grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
    }

    .branch-card {
      background: var(--w1);
      border-radius: 12px;
      padding: 20px;
      box-shadow: 0 2px 8px rgba(0,0,0,0.08);
      transition: transform 0.3s ease, box-shadow 0.3s ease;
    }

    .branch-card:hover {
      transform: translateY(-5px);
      box-shadow: 0 6px 16px rgba(0,0,0,0.12);
    }

    .branch-name {
      color: var(--primary);
      font-size: 1.2rem;
      font-weight: 600;
      margin-bottom: 8px;
    }

    .branch-address {
      color: var(--muted);
      margin-bottom: 12px;
      font-size: 0.95rem;
    }

    .branch-contact {
      display: flex;
      flex-direction: column;
      gap: 4px;
      font-size: 0.9rem;
    }

    .branch-hours {
      margin-top: 12px;
      font-size: 0.9rem;
      color: var(--muted);
    }

    .branch-hours strong {
      color: var(--text);
    }

    .branch-card.active {
      border-left: 4px solid var(--secondary);
      background-color: rgba(231, 76, 60, 0.05);
    }

    @media (max-width: 768px) {
      .cols-3 {
        grid-template-columns: 1fr;
      }

      .map-container {
        height: 300px;
      }
    }
  </style>
</head>
<body>
  <script src="js/main.js"></script>


  <main class="wrap">
    <h1>Our Branches</h1>

    <div class="map-container">
      <div id="map"></div>
    </div>

    <div class="grid cols-3" id="branchesList">
      <!-- Branch cards will be populated by JavaScript -->
    </div>
  </main>

  <!-- Load config first -->
  <script src="js/config.js"></script>

  <script>
    // Static branch data
     const branches = [
           {
        id: 5,
        name: "Main Branch",
        address: "Building No. 73, Alley 13, Block 506, Al-Mustansiriya District, Palestine Street, Baghdad, Iraq",
        phone: "+964 790 190 7456",
        hours: "8:30 AM - 4:30 PM",
        lat: 33.36259784351992,
        lng: 44.410128460610515,
        type: "main"
      },
      {
        id: 1,
        name: "UAE Regional Office",
        address: "Office No. 1305, 13th Floor, Sheikh Rashid Building, Exhibition Commercial Area - Dubai, UAE",
        phone: "+971 4 364 0000",
        hours: "9:00 AM - 5:00 PM",
        lat: 25.206610249881944,
        lng: 55.270196009259735,
        type: "regional"
      },
      {
        id: 2,
        name: "Turkmen Club Square",
        address: "Al-Akhaa Turkmen Club Square, Palestine Street, Baghdad - Iraq",
        phone: "+964 771 777 7229",
        hours: "8:30 AM - 4:30 PM",
        lat: 33.36243460088588,
        lng: 44.40730000733017,
        type: "regular"
      },
      {
        id: 3,
        name: "Street 6",
        address: "Street 6, Al-Alawi - Near Al-Karama Hospital, Baghdad - Iraq",
        phone: "+964 771 777 7392",
        hours: "7:00 AM - 3:00 PM",
        lat: 33.334042105791426,
        lng: 44.380005848839374,
        type: "regular"
      },
      {
        id: 4,
        name: "Erbil",
        address: "St. 100, across Familymall, Erbil - Iraq",
        phone: "+964 750 900 9331 / +964 750 900 9332",
        hours: "8:30 AM - 4:30 PM",
        lat: 36.19598808715695,
        lng: 44.04216989621947,
        type: "regular"
      },

      {
        id: 6,
        name: "Karrada",
        address: "Al-Karrada, Al-Wehda District, National Theater Square, Next to Air Force Hospital, Baghdad - Iraq",
        phone: "+964 771 777 7391",
        hours: "8:30 AM - 4:30 PM",
        lat: 33.30688482145459,
        lng: 44.43066854941859,
        type: "regular"
      },
      {
        id: 7,
        name: "Al-Sinek",
        address: "Al-Sinek, Al-Khani Commercial Complex, Near Sheikh Abdul Qadir Al-Kailani Shrine, Baghdad - Iraq",
        phone: "+964 771 777 7228 / +964 783 027 9777",
        hours: "7:00 AM - 3:00 PM",
        lat: 33.33691045493454,
        lng: 44.40747166860866,
        type: "regular"
      },
      {
        id: 8,
        name: "Vehicle Services Branch",
        address: "Al-Karrada, Al-Wehda District, National Theater Square, Next to Air Force Hospital, Baghdad - Iraq",
        phone: "+964 783 023 9000",
        hours: "8:00 AM - 8:00 PM",
        lat: 33.30704677515004,
        lng: 44.43124669767629,
        type: "services"
      },
            {
        id: 9,
        name: "Jurf Warehouses",
        address: "Jurf Al-Naddaf, Baghdad - Iraq",
        hours: "8:00 AM - 8:00 PM",
        lat: 33.229060596098456,
        lng: 44.56804179406394,
        type: "Warehouse"
      }
    ];

    // Initialize Google Maps
    let map;
    let markers = [];
    let infoWindows = [];

    function initMap() {
      // Center map on Riyadh
      const center = { lat: 33.3152, lng: 44.3661 };

      // Create map
      map = new google.maps.Map(document.getElementById("map"), {
        zoom: 11,
        center: center,
        styles: [
          // Your existing map styles
          {
            "featureType": "all",
            "elementType": "geometry.fill",
            "stylers": [{ "weight": "2.00" }]
          },
          // ... rest of your styles
        ]
      });

      // Create markers for each branch
      branches.forEach((branch, index) => {
        const marker = new google.maps.Marker({
          position: { lat: branch.lat, lng: branch.lng },
          map: map,
          title: branch.name,
          icon: {
            url: "data:image/svg+xml;charset=UTF-8," + encodeURIComponent(`
              <svg width="32" height="40" viewBox="0 0 32 40" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M16 0C10.4772 0 6 4.47715 6 10C6 17 16 30 16 30C16 30 26 17 26 10C26 4.47715 21.5228 0 16 0Z" fill="#e74c3c"/>
                <circle cx="16" cy="10" r="5" fill="white"/>
              </svg>
            `),
            scaledSize: new google.maps.Size(32, 40),
            anchor: new google.maps.Point(16, 40)
          }
        });

        // Create info window for each marker
        const infoWindow = new google.maps.InfoWindow({
          content: `
            <div style="padding: 10px; max-width: 250px;">
              <h3 style="margin: 0 0 8px; color: #2c3e50;">${branch.name}</h3>
              <p style="margin: 0 0 8px; color: #6c757d; font-size: 14px;">${branch.address}</p>
              <p style="margin: 0 0 8px; font-size: 14px;"><strong>Phone:</strong> ${branch.phone}</p>
              <p style="margin: 0; font-size: 14px;"><strong>Hours:</strong> ${branch.hours}</p>
            </div>
          `
        });

        // Add click event to marker
        marker.addListener("click", () => {
          infoWindows.forEach(window => window.close());
          infoWindow.open(map, marker);
          highlightBranchCard(branch.id);
        });

        markers.push(marker);
        infoWindows.push(infoWindow);
      });
    }

    function highlightBranchCard(branchId) {
      document.querySelectorAll('.branch-card').forEach(card => {
        card.classList.remove('active');
      });

      const branchCard = document.getElementById(`branch-${branchId}`);
      if (branchCard) {
        branchCard.classList.add('active');
        branchCard.scrollIntoView({ behavior: 'smooth', block: 'nearest' });
      }
    }

    function createBranchCards() {
      const branchesList = document.getElementById('branchesList');

      branches.forEach(branch => {
        const branchCard = document.createElement('div');
        branchCard.className = 'card';
        branchCard.style = 'cursor:pointer';
        branchCard.id = `branch-${branch.id}`;

        branchCard.innerHTML = `
          <h3 class="branch-name">${branch.name}</h3>
          <p class="branch-address">${branch.address}</p>
          <div class="branch-contact">
            <div><strong>Phone:</strong> ${branch.phone}</div>
            <div><strong>Email:</strong> ${branch.email}</div>
          </div>
          <div class="branch-hours">
            <strong>Business Hours:</strong> ${branch.hours}
          </div>
        `;

        branchCard.addEventListener('click', () => {
          highlightBranchCard(branch.id);
          infoWindows.forEach(window => window.close());

          const markerIndex = branches.findIndex(b => b.id === branch.id);
          if (markerIndex !== -1) {
            infoWindows[markerIndex].open(map, markers[markerIndex]);
            map.setCenter(markers[markerIndex].getPosition());
            map.setZoom(15);
            const mapSection = document.getElementById('map'); // Add this ID to your HTML
              if (mapSection) {
                mapSection.scrollIntoView({ behavior: 'smooth', block: 'start' });
              } else {
                window.scrollTo({ top: 0, behavior: 'smooth' });
              }

          }
        });

        branchesList.appendChild(branchCard);
      });
    }

    document.addEventListener('DOMContentLoaded', () => {
      document.body.style.visibility = 'visible';
      createBranchCards();
    });
  </script>

  <!-- Google Maps API with config key -->
  <script
    src="https://maps.googleapis.com/maps/api/js?key=AIzaSyB2o-VeYnPFSRTc6S-PncFuka0ScwMit-o&callback=initMap"
    async
    defer>
  </script>

</body>
</html>